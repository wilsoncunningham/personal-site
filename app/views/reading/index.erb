<div class="container py-5">

  <div title="page-title" class="py-4">
    <h1 class="fire-red"><em>Reading</em></h1>
  </div>

  <div title="reading-description" class="py-2">
    <p class="off-white">
      Since finishing up my bachelor's in March, I have taken up the hobby of reading—but solely for my own enrichment this time around. While my reading journey is still budding, I have learned a lot so far, and I have a robust list of books I'd like to read in the future. Many people claim that they don't like to read, and I believe they are mistaken. What I have learned in my journey is that they simply have not yet discovered what they love to read.
    </p>
  </div>

  <div class="row vpadding-thin text-start">
    <div class="col">
      <h3 class="fire-red">Reading Log</h3>
    </div>
    <div class="col-9">
      <p>
        To help myself discover what I love to read and to simply keep track, I have kept a detailed log of what I have been reading, giving ratings for each of my reads.
        <br><br>
        <em><u>A note:</u></em> To see my notes for each book, click on its row to expand it. My notes are very casual and my arguments may be left entirely unjustified. Treat these notes more as journal entries or reflections rather than formal reviews. I write these notes for myself to look back on, and I am posting them here as well simply as an invitation to thought. Finally, <span class="fire-red"><b><em>SPOILER ALERT:</em></b></span> My notes are filled with spoilers. I will thus leave them as drop-downs, only visible once clicked on. 
      </p>
    </div>
  </div>

  <h3 class="fire-red">Add a New Book Entry</h3>

  <% if admin_signed_in? %>
    <%= form_tag("/reading", method: "post", class: "mb-5, off-white") do %>
      <div class="mb-3">
        <%= label_tag(:query_title, "Title", class: "form-label") %>
        <%= text_field_tag(:query_title, nil, class: "form-control") %>
      </div>

      <div class="mb-3">
        <%= label_tag(:query_author, "Author", class: "form-label") %>
        <%= text_field_tag(:query_author, nil, class: "form-control") %>
      </div>

      <div class="mb-3">
        <%= label_tag(:query_rating, "Rating", class: "form-label") %>
        <%= number_field_tag(:query_rating, nil, step: 0.5, class: "form-control") %>
      </div>

      <div class="mb-3">
        <%= label_tag(:query_start_date, "Start Date", class: "form-label") %>
        <%= date_field_tag(:query_start_date, nil, class: "form-control") %>
      </div>

      <div class="mb-3">
        <%= label_tag(:query_end_date, "End Date", class: "form-label") %>
        <%= date_field_tag(:query_end_date, nil, class: "form-control") %>
      </div>

      <div class="mb-3">
        <%= label_tag(:query_notes, "Notes", class: "form-label") %>
        <%= text_area_tag(:query_notes, nil, rows: 4, class: "form-control") %>
      </div>

      <%= submit_tag("Add Book", class: "btn btn-light") %>
    <% end %>
  <% end %>


  <div class="vpadding-thick">
    <table class="table table-striped table-dark table-hover reading-log-table libre-franklin">
      <thead>
        <tr>
          <th scope="col">TITLE</th>
          <th scope="col">DATE</th>
          <th scope="col">RATING</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <% @list_of_books.each do |book| %>
          <tr data-bs-toggle="collapse" data-bs-target="#notes<%= book.id %>" aria-expanded="false" class="clickable-row">
            <td>
              <%= book.title %><br>by <%= book.author %>

              <div id="notes<%= book.id %>" class="collapse mt-2 text-indent">
                <%= book.notes.html_safe %>
              </div>
        
            </td>
            <td>
              <% if book.start_date.month == book.end_date.month %>
                <%= book.start_date.strftime("%B %-d") %>–<%= book.end_date.strftime("%-d, %Y") %>
              <% else %>
                <%= book.start_date.strftime("%B %-d") %> – <%= book.end_date.strftime("%B %-d, %Y") %>
              <% end %>            
            </td>
            <td><%= book.rating %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

</div>
