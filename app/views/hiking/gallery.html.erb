<% content_for :title, "Hiking Photo Gallery | Wilson Cunningham" %>
<% content_for :meta_description, "Highlights of Wilson Cunninghamâ€™s hiking experiences across the U.S., from desert scrambles to alpine climbs, with reflections and favorite trails." %>


<div class="container page-content py-5">

  <div class="pt-5">
    <h1 class="sage"><em>Hiking Photo Gallery</em></h1>
  </div>

  <div class="py-4">
    <p>
      Click on any image preview to view in full-screen.
    </p>
  </div>

  <div class="photo-grid">
    <% @photos.each_with_index do |photo, index| %>
      <div class="photo-card" role="button"
            data-bs-toggle="modal"
            data-bs-target="#galleryModal"
            data-bs-slide-to="<%= index %>"
            data-photo-index="<%= index %>">
        <% if photo.image.attached? %>
          <%= image_tag photo.thumbnail , loading: "lazy",
                class: "photo-img", alt: photo.title.presence || "Photo" %>
        <% end %>
        <div class="photo-meta">
          <h2><%= photo.title %></h2>
          <% if photo.caption.present? %>
            <p><%= photo.caption %></p>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="text-center my-4">
    <button class="load-more-btn btn btn-secondary" style="font-family: Libre Franklin">View More</button>
  </div>

  <div class="modal fade bg-modal-dark" id="galleryModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content bg-modal-content">
        <div class="modal-body">

          <div id="carouselHikingGallery" class="carousel slide" data-bs-ride="false">
            <div class="carousel-inner">

              <% @photos.each_with_index do |photo, index| %>
                <div class="carousel-item <%= 'active' if index == 0 %>">
                  <% if photo.image.attached? %>
                    <%= image_tag photo.image, class: "carousel-gallery", alt: photo.title.presence || "Photo" %>
                  <% end %>
                  <div class="carousel-caption-below d-none d-md-block">
                    <h2><%= photo.title %></h2>
                    <% if photo.caption.present? %>
                      <p><%= photo.caption %></p>
                    <% end %>
                  </div>
                </div>
              <% end %>

            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselHikingGallery" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselHikingGallery" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>
