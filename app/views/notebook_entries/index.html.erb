<div class="container page-content py-5">

  <div class="py-4">
    <h1 class="fire-red">Notebook</h1>
  </div>

  <p class="py-2">
    This is my digital notebook, a casual space where I make blog posts or simply jot down interesting thoughts, links, or photos. Some entries are quick ideas, while others are more meticulously written. It's a mix of signal and curiosityâ€”part blog, part scratchpad.
  </p>

  <% if current_user && current_user.admin? %>
    <a href="/notebook/new" class="btn btn-light">
      New Entry
    </a>
  <% end %>

  <% if @notebook_entries.any? %>
    <div class="py-5">
      <% @notebook_entries.each do |entry| %>
        <% if entry.is_public %>
          <%= link_to "/notebook/#{entry.id}", class: "text-decoration-none text-reset" do %>
            <div class="notebook-entry-box p-4 mb-2 shadow">
              <div class="d-flex justify-content-between align-items-start mb-1">
                
                <div>
                  
                  <div class="d-flex justify-content-start align-items-center">
                    <h2 class="mb-1 fire-red">
                      <%= entry.title.presence || "(Untitled)" %>
                    </h2>

                    <% if entry.entry_type.present? %>
                      <span class="notebook-badge mx-3"><%= entry.entry_type.capitalize %></span>
                    <% end %>
                    
                    <% if entry.is_pinned? %>
                      <div class="pe-2" title="Pinned">ðŸ“Œ</div>
                    <% end %>
                  </div>


                  <% if entry.tags.present? %>
                    <div class="mb-1">
                      <% entry.tags.split(',').each do |tag| %>
                        <span class="notebook-tag">#<%= tag.strip %></span>
                      <% end %>
                    </div>
                  <% end %>
                </div>

                <div class="text-end">
                  <div>
                    <span class="text-sm notebook-tag"><%= entry.created_at.strftime("%b %d, %Y") %></span>
                  </div>
                </div>
                
              </div>

            </div>
          <% end %>

        <% elsif current_user.admin? && !entry.is_public %>
          <%= link_to "/notebook/#{entry.id}", class: "text-decoration-none text-reset" do %>
            <div class="notebook-entry-box p-4 mb-2 shadow">
              <div class="d-flex justify-content-between align-items-start mb-1">
                
                <div>
                  
                  <div class="d-flex justify-content-start align-items-center">
                    <h2 class="mb-1 fire-red">
                      UNPUBLISHED: <%= entry.title.presence || "(Untitled)" %>
                    </h2>

                    <% if entry.entry_type.present? %>
                      <span class="notebook-badge mx-3"><%= entry.entry_type.capitalize %></span>
                    <% end %>
                    
                    <% if entry.is_pinned? %>
                      <div class="pe-2" title="Pinned">ðŸ“Œ</div>
                    <% end %>
                  </div>


                  <% if entry.tags.present? %>
                    <div class="mb-1">
                      <% entry.tags.split(',').each do |tag| %>
                        <span class="notebook-tag">#<%= tag.strip %></span>
                      <% end %>
                    </div>
                  <% end %>
                </div>

                <div class="text-end">
                  <div>
                    <span class="text-sm notebook-tag">UNPUBLISHED: <%= entry.created_at.strftime("%b %d, %Y") %></span>
                  </div>
                </div>
                
              </div>

            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <p class="text-muted">No notebook entries yet.</p>
  <% end %>

</div>>
